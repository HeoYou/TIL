#  du와 df의 차이



linux에서 용량을 확인할 때 du또는 df를 주로 사용하는데

사용중인 용량이 서로 다르다는 사실을 알고 알아보았다.



보통 df의 용량이 더나온다.

- df는 현재 마운트 된 파일시스템의 상태를 기초로하여 사용률을 보여준다.
- du는 실제 디렉토리의 파일을 확인하고 그 크기를 조사하기 때문.

- 현재 실행중인 프로세스가 오픈한 파일을 삭제하고 프로세스를 종료하지 않으면 그 파일은 deleted상태로 남게된다. 즉, 파일 시스템에 deleted 상태정보로 유지되고 잇는 것이다. 그렇기 때문에 df명령어는 deleted파일까지 용량이 더해져 du명령어와 크기 차이가 날 수 있다. 



한줄 요약 >  df는 삭제한 데이터를 프로세스가 잡고있으면 잡고 있는 데이터의 용량 만큼 du보다 더 많이 나온다.



삭제한 데이터 확인방법 

- lsof 명령으를 통해서 deleted 상태의 파일을 확인 할 수 있다. 각각의 파일 정보에서 해당 PID를 찾아서 프로세스를 리셋하거나 종료하면 프로세스가 물고있는 데이터를 확인 할 수 있따.

```bash
# lsof | grep deleted
```





